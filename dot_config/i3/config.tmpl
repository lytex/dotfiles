# Modified from https://github.com/guillaumecherel/i3-modal
#
# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# Startup applications

# exec --no-startup-id nm-applet
# exec --no-startup-id redshift-gtk
# exec --no-startup-id udiskie --tray
# exec --no-startup-id emacs --daemon
# Not really needed, except for xdotool:
# exec --no-startup-id setxkbmap fr bepo

# Applications
#
set $terminal /usr/bin/alacritty -e zsh
set $code_terminal /usr/bin/kitty --title=kitty --class=kitty --name=kitty sh --login -c nvim 
# Hack to prevent killing a terminal window with unsaved work
# i k confirms kill and closes the nagbar, closing with the graphical X keeps the terminal open
set $gentle_kill zsh -c '( xprop -id $(xdotool getactivewindow) | grep -i -e alacritty ) && i3-nagbar -m "KILL Are you sure??" || wmctrl -c :ACTIVE:'

# set $editor /usr/bin/emacsclient -c
# set $web /home/guillaume/.local/bin/firefox
# set $email /home/guillaume/.local/bin/astroid
# set $shell /usr/bin/fish
set $rofi /usr/bin/rofi -matching regex -sort-method fzf -sort -font "Fantasque Sans Mono 14" -theme Monokai

# Script: https://git.zx2c4.com/password-store/tree/contrib/dmenu/passmenu#n27
set $password_command "/usr/bin/passmenu"

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# font pango:monospace 8
font pango:Fantasque Sans Mono 10

exec_always feh --bg-fill ~/.local/share/wallpapers/i3-wallpaper # symlink to your actual wallpaper

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier Mod4


# workspace back and forth (with/without active container)
workspace_auto_back_and_forth yes

# workspace tabbed by default
workspace_layout tabbed


# Workspace names
# to display names or symbols instead of plain workspace numbers you can use
# something like: set $ws1 1:mail
#                 set $ws2 2:
set $ws1 "1: Main"
set $ws2 "2: Meetings"
set $ws3 "3: Maintenance"
set $ws4 "4: Chat"
{{ if .work }}
set $ws5 "5: DBeaver"
{{ else }}
set $ws5 5
{{ end }}
set $ws6 6
set $ws7 7
set $ws8 8
{{ if .work }}
set $ws9 "9: misc term"
{{ else }}
set $ws9 9
{{ end }}
set $ws10 10
{{ if .work }}
workspace $ws1 output "HDMI-1"
workspace $ws4 output "eDP-1"
workspace $ws5 output "DP-2-1"
workspace $ws10 output "eDP-1"
{{ end }}

# Plasma compatibility improvements
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable

for_window [class="yakuake"] floating enable
for_window [class="systemsettings"] floating enable
for_window [class="plasmashell"] floating enable;
for_window [class="Plasma"] floating enable; border none
for_window [title="plasma-desktop"] floating enable; border none
for_window [title="Desktop — Plasma"] kill; floating enable; border none
for_window [title="win7"] floating enable; border none
for_window [class="krunner"] floating enable; border none
for_window [class="Kmix"] floating enable; border none
for_window [class="Klipper"] floating enable; border none
for_window [class="Plasmoidviewer"] floating enable; border none
for_window [class="(?i)*nextcloud*"] floating disable
for_window [class="plasmashell" window_type="notification"] border none, move right 40ppt, move down 40ppt
no_focus [class="plasmashell" window_type="notification"]

bindsym Mod4+1 workspace number $ws1
bindsym Mod4+2 workspace number $ws2
bindsym Mod4+3 workspace number $ws3
bindsym Mod4+4 workspace number $ws4
bindsym Mod4+5 workspace number $ws5
bindsym Mod4+6 workspace number $ws6
bindsym Mod4+7 workspace number $ws7
bindsym Mod4+8 workspace number $ws8
bindsym Mod4+9 workspace number $ws9
bindsym Mod4+0 workspace number $ws10

bindsym Mod1+Mod4+1 move container to workspace number $ws1
bindsym Mod1+Mod4+2 move container to workspace number $ws2
bindsym Mod1+Mod4+3 move container to workspace number $ws3
bindsym Mod1+Mod4+4 move container to workspace number $ws4
bindsym Mod1+Mod4+5 move container to workspace number $ws5
bindsym Mod1+Mod4+6 move container to workspace number $ws6
bindsym Mod1+Mod4+7 move container to workspace number $ws7
bindsym Mod1+Mod4+8 move container to workspace number $ws8
bindsym Mod1+Mod4+9 move container to workspace number $ws9
bindsym Mod1+Mod4+0 move container to workspace number $ws0

bindsym Mod4+q exec $gentle_kill
bindsym Mod4+r mode "$mode_window_resize"
# send C-\ C-n (exit terminal mode) using C-'
bindsym --release Control+apostrophe exec xdotool key --window $(xdotool getactivewindow) 'control+backslash' key 'control+n'
bindsym --release Mod4+p exec xdotool key 'Print'

# Get windows class with xprop | grep 'CLASS'
# Then click the appropiate window (use a i3 split)
assign [class="Ferdi"] number $ws4
assign [class="TelegramDesktop"] number $ws4
assign [class="whatsdesk"] number $ws4
{{ if .work }}
assign [class="Teams"] number $ws4
no_focus [class="Teams"]
assign [class="Slack"] number $ws4
assign [class="Evolution"] number $ws10
assign [class="DBeaver"] number $ws5
{{ end }}

exec i3-msg workspace number $ws1 # Start at defined workspace instead of at workspace 1 (default)
# Toggle i3 bar
bindsym Control+Mod1+i bar mode toggle


bindsym --release Control+Mod1+j exec xset dpms force off

# Lock screen
bindsym --release Control+Mod1+l exec --no-startup-id i3lock -c 553333 && xset dpms force off
bindsym --release Mod4+l exec --no-startup-id i3lock -c 553333 && xset dpms force off
# Hibernate (really sleep)
bindsym Control+Mod1+h exec --no-startup-id i3lock -c 553333 && systemctl suspend

#### Modes ####
#
# Control+semicolon gets you to "mode switch" mode from anywhere. 
# Returns starts a terminal
# Space starts a desktop app
# q quits the focused window
# r activates resize mode
# o searches jumps to a window by title
# a goes to layout mode (horizontal, vertical, stacking, tabbed mode)
# v goes to move mode
# m sets marks
# ' goes to a mark
# Escape (or Control+Escape) goes to default mode 
# Some modes are transient modes, meaning once a command is pressed, they return to default mode without having to press Escape

bindsym Control+semicolon mode "$mode_switch"
bindsym Mod4+z mode "$mode_switch"

# set $mode_switch [space] app, [Return] terminal, to [o]pen window, [hjklpP[0-9]] navigate, [m]ove, l[a]yout, [r]esize, [x] scratchpad, [q]uit, [s]witch last wrksp, [,] rename
# [d] toggle floating/tiling, [i]3 special
set $mode_switch -- SWITCH --
mode "$mode_switch" {
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon nop

    bindsym space exec $rofi -location 2 -width 100 -show drun; mode "default"
    bindsym Return exec $terminal ; mode "default"
    bindsym Control+Return exec $code_terminal ; mode "default"
    # quit focused window
    bindsym q exec $gentle_kill
    bindsym w mode "$mode_move_workspace"
    bindsym r mode "$mode_window_resize"
    # go to open window
    bindsym o exec $rofi -location 2 -width 100 -show window; mode default
    bindsym a mode "$mode_layout"
    bindsym v mode "$mode_move_container"
    # read 1 character and mark the current window with this character
    bindsym m exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
    # read 1 character and go to the window with the character
    bindsym apostrophe exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '
    # rename current workspace
    bindsym comma exec i3-input -F 'rename workspace to "%s"' -P 'New name for this workspace: '
    # rename current window
    bindsym period exec i3-input -F 'exec i3-msg title_format "%s"' -P 'New name for this window: '

    # change focus
    bindsym h focus left; mode "$mode_navigate"
    bindsym j focus down; mode "$mode_navigate"
    bindsym k focus up; mode "$mode_navigate"
    bindsym l focus right; mode "$mode_navigate"
    # focus the parent container
    bindsym p focus parent; mode "$mode_navigate"
    # focus the child container
    bindsym Shift+p focus child; mode "$mode_navigate"
    # switch between last used workspaces
    bindsym f workspace back_and_forth; mode "$mode_navigate"
    bindsym s exec i3-msg "sticky toggle"
    # go to workspace
    bindsym exclam workspace number $ws1; mode "$mode_navigate"
    bindsym at workspace number $ws2; mode "$mode_navigate"
    bindsym numbersign workspace number $ws3; mode "$mode_navigate"
    bindsym dollar workspace number $ws4; mode "$mode_navigate"
    bindsym percent workspace number $ws5; mode "$mode_navigate"
    bindsym asciicircum workspace number $ws6; mode "$mode_navigate"
    bindsym ampersand workspace number $ws7; mode "$mode_navigate"
    bindsym asterisk workspace number $ws8; mode "$mode_navigate"
    bindsym parenleft workspace number $ws9; mode "$mode_navigate"
    bindsym parenright workspace number $ws10; mode "$mode_navigate"
    # change focus between tiling / floating windows
    bindsym d focus mode_toggle

    bindsym i mode "$mode_i3_special"

    bindsym c exec $password_command; mode "default"

    # Show the first scratchpad window
    bindsym x scratchpad show

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym q exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym m exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}


# set $mode_navigate [space] app, [Return] terminal, to [o]pen window, [hjklpP[0-9]] navigate, [m]ove, l[a]yout, [r]esize, [q]uit, [s]witch last wrkspc [,] rename
# [d] toggle floating/tiling, [i]3 special
set $mode_navigate -- NAVIGATE --
mode "$mode_navigate" {
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon mode "$mode_switch"
    bindsym Mod4+z mode "$mode_switch"

    bindsym space exec $rofi -location 2 -width 100 -show drun; mode "default"
    bindsym Return exec $terminal ; mode "default"
    bindsym Control+Return exec $code_terminal ; mode "default"
   # quit focused window
    bindsym q exec $gentle_kill
    bindsym w mode "$mode_move_workspace"
    bindsym r mode "$mode_window_resize"
    # go to open window
    bindsym o exec $rofi -location 2 -width 100 -show window; mode default
    bindsym a mode "$mode_layout"
    bindsym v mode "$mode_move_container"
    # read 1 character and mark the current window with this character
    bindsym m exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
    # read 1 character and go to the window with the character
    bindsym apostrophe exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '
    # rename current workspace
    bindsym comma exec i3-input -F 'rename workspace to "%s"' -P 'New name for this workspace: '
    # rename current window
    bindsym period exec i3-input -F 'exec i3-msg title_format "%s"' -P 'New name for this window: '

    # change focus
    bindsym h focus left
    bindsym j focus down
    bindsym k focus up
    bindsym l focus right
    # focus the parent container
    bindsym p focus parent
    # focus the child container
    bindsym Shift+p focus child
    # switch between last used workspaces
    bindsym f workspace back_and_forth
    bindsym s exec i3-msg "sticky toggle"
    # go to workspace
    bindsym exclam workspace number $ws1
    bindsym at workspace number $ws2
    bindsym numbersign workspace number $ws3
    bindsym dollar workspace number $ws4
    bindsym percent workspace number $ws5
    bindsym asciicircum workspace number $ws6
    bindsym ampersand workspace number $ws7
    bindsym asterisk workspace number $ws8
    bindsym parenleft workspace number $ws9
    bindsym parenright workspace number $ws10
    # change focus between tiling / floating windows
    bindsym d focus mode_toggle

    # Show the first scratchpad window
    bindsym x scratchpad show

    bindsym i mode "$mode_i3_special"

    bindsym c exec $password_command; mode "default"

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym r exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym m exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}

# [hjkl] keeps focus
# [Shift+hjkl] loses focus
# set $mode_move_container Move container [hjkl] or [<arrows>], [<workspace>] move to workspace, [Shift+hjkl] to outputs, [q]uit container, [d] toggle floating/tiling, [space] navigate [,] rename
set $mode_move_container -- MOVE --
mode "$mode_move_container" {
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon mode "$mode_switch"
    bindsym Mod4+z mode "$mode_switch"

    bindsym space exec $rofi -location 2 -width 100 -show drun; mode "default"
    bindsym Return exec $terminal ; mode "default"
    bindsym Control+Return exec $code_terminal ; mode "default"
    # quit focused window
    bindsym q exec $gentle_kill
    bindsym w mode "$mode_move_workspace"
    bindsym r mode "$mode_window_resize"
    # go to open window
    bindsym o exec $rofi -location 2 -width 100 -show window; mode default
    bindsym a mode "$mode_layout"
    # read 1 character and mark the current window with this character
    bindsym m exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
    # read 1 character and go to the window with the character
    bindsym apostrophe exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '
    # rename current workspace
    bindsym comma exec i3-input -F 'rename workspace to "%s"' -P 'New name for this workspace: '
    # rename current window
    bindsym period exec i3-input -F 'exec i3-msg title_format "%s"' -P 'New name for this window: '

    # move focused window
    bindsym h move left
    bindsym j move down
    bindsym k move up
    bindsym l move right

    # Move to alternate
    bindsym f move container to workspace back_and_forth; workspace back_and_forth

    bindsym s exec i3-msg "sticky toggle"

    # Make the currently focused window a scratchpad
    bindsym x move scratchpad

    # move focused container to workspace
    bindsym exclam move container to workspace number $ws1
    bindsym at move container to workspace number $ws2
    bindsym numbersign move container to workspace number $ws3
    bindsym dollar move container to workspace number $ws4
    bindsym percent move container to workspace number $ws5
    bindsym asciicircum move container to workspace number $ws6
    bindsym ampersand move container to workspace number $ws7
    bindsym asterisk move container to workspace number $ws8
    bindsym parenleft move container to workspace number $ws9
    bindsym parenright move container to workspace number $ws10

    # move container to outputs
    bindsym Shift+h move container to output right
    bindsym Shift+j move container to output left
    bindsym Shift+k move container to output up
    bindsym Shift+l move container to output down

    # quit focused window
    bindsym q exec $gentle_kill

    # toggle tiling / floating
    bindsym d floating toggle

    bindsym i mode "$mode_i3_special"

    bindsym c exec $password_command; mode "default"

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym p exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym f exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym v exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}

# set $mode_layout Layout split [h]orizontally, [v]ertically, [f]ullscreen, [s]tacking, [w]indow, toggle s[p]lit, [d] toggle floating/tiling, [space] navigate
set $mode_layout -- LAYOUT --
mode "$mode_layout" {
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon mode "$mode_switch"
    bindsym Mod4+z mode "$mode_switch"

    bindsym space exec $rofi -location 2 -width 100 -show drun; mode "default"
    bindsym Return exec $terminal ; mode "default"
    bindsym Control+Return exec $code_terminal ; mode "default"
    # quit focused window
    bindsym q exec $gentle_kill
    bindsym r mode "$mode_window_resize"
    # go to open window
    bindsym o exec $rofi -location 2 -width 100 -show window; mode default
    # bindsym v mode "$mode_move_container" # clashes with vertical split

    # split following vim convention (which is the opposite of i3 convention)
    # split in horizontal orientation
    bindsym v split h
    # split in vertical orientation
    bindsym h split v

    # enter fullscreen mode for the focused container
    bindsym f fullscreen toggle

    # change container layout (stacked, tabbed, toggle split)
    bindsym s layout stacking
    bindsym w layout tabbed
    bindsym p layout toggle split

    # toggle tiling / floating
    bindsym d floating toggle

    # Show the first scratchpad window
    bindsym x scratchpad show

    bindsym i mode "$mode_i3_special"

    bindsym c exec $password_command; mode "default"

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym j exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym k exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym l exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym x exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}

# set $mode_window_resize Resize with [hjkl], [space] navigate
set $mode_window_resize -- RESIZE --
mode "$mode_window_resize" {
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon mode "$mode_switch"
    bindsym Mod4+z mode "$mode_switch"

    bindsym space exec $rofi -location 2 -width 100 -show drun; mode "default"
    bindsym Return exec $terminal ; mode "default"
    bindsym Control+Return exec $code_terminal ; mode "default"
    # quit focused window
    bindsym q exec $gentle_kill
    bindsym w mode "$mode_move_workspace"
    # go to open window
    bindsym o exec $rofi -location 2 -width 100 -show window; mode default
    bindsym a mode "$mode_layout"
    bindsym v mode "$mode_move_container"
    # read 1 character and mark the current window with this character
    bindsym m exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
    # read 1 character and go to the window with the character
    bindsym apostrophe exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '
    # rename current workspace
    bindsym comma exec i3-input -F 'rename workspace to "%s"' -P 'New name for this workspace: '
    # rename current window
    bindsym period exec i3-input -F 'exec i3-msg title_format "%s"' -P 'New name for this window: '

    # Pressing left will shrink the window’s width.
    # Pressing right will grow the window’s width.
    # Pressing up will shrink the window’s height.
    # Pressing down will grow the window’s height.
    bindsym h resize shrink width 5 px or 5 ppt
    bindsym j resize grow height 5 px or 5 ppt
    bindsym k resize shrink height 5 px or 5 ppt
    bindsym l resize grow width 5 px or 5 ppt

    bindsym i mode "$mode_i3_special"

    bindsym c exec $password_command; mode "default"

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym r exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym p exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym s exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym d exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym f exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym x exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym m exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}

# set $mode_i3_special reload [c]onfiguration, [r]estart, [k]ill nagbar, [q]uit & start kde, [i]
set $mode_i3_special -- i3 SPECIAL --
mode "$mode_i3_special" {
    # Transient mode, exit when running a command to default mode
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon mode "$mode_switch"
    bindsym Mod4+z mode "$mode_switch"

    bindsym Return mode "default"

    bindsym space mode "$mode_switch"

    # reload the configuration file
    bindsym c reload; mode "default"
    # restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
    bindsym r restart; mode "default"

    # close open nagbar
    bindsym k exec "killall i3-nagbar"; mode "default"
    
    # quit & restart kde
    bindsym q exec "kquitapp5 plasmashell && kstart5 plasmashell"

    # fix to redraw terminal
    bindsym i floating toggle

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym w exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym o exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym p exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym a exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym s exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym d exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym f exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym h exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym j exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym l exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym x exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym v exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym m exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}

# set $mode_move_workspace Get workspace from [<workspace>] or move to output [hjkl], [space] navigate [,] rename
set $mode_move_workspace -- MOVE WORKSPACE --
mode "$mode_move_workspace" {
    bindsym Escape mode "default"
    bindsym Control+Escape mode "default"

    bindsym Control+semicolon mode "$mode_switch"
    bindsym Mod4+z mode "$mode_switch"

    bindsym Return mode "default"

    bindsym space mode "$mode_navigate"

    # rename current workspace
    bindsym comma exec i3-input -F 'rename workspace to "%s"' -P 'New name for this workspace: '
    # rename current window
    bindsym period exec i3-input -F 'exec i3-msg title_format "%s"' -P 'New name for this window: '

    # move whole workspace to outputs
    bindsym h move workspace to output right
    bindsym j move workspace to output left
    bindsym k move workspace to output up
    bindsym l move workspace to output down

    # get workspace to current output
    bindsym exclam [workspace="1"] move workspace to output current
    bindsym at [workspace="2"] move workspace to output current
    bindsym numbersign [workspace="3"] move workspace to output current
    bindsym dollar [workspace="4"] move workspace to output current
    bindsym percent [workspace="5"] move workspace to output current
    bindsym asciicircum [workspace="6"] move workspace to output current
    bindsym ampersand [workspace="7"] move workspace to output current
    bindsym asterisk [workspace="8"] move workspace to output current
    bindsym parenleft [workspace="9"] move workspace to output current
    bindsym parenright [workspace="10"] move workspace to output current

    bindsym i mode "$mode_i3_special"

    bindsym c exec $password_command; mode "default"

    # Alert on unrecognized commands and exit to default mode to avoid accidental input
    bindsym q exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym w exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym e exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym r exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym t exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym y exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym u exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym o exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym p exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym a exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym s exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym d exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym f exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym g exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym z exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym x exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym v exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym b exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym n exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
    bindsym m exec "i3-nagbar -m 'Unrecognized command, going back to default mode'"; mode "default"
}

# Start i3bar to display a workspace bar (ampersand the system information i3status

# finds out, if available)
bar {
        status_command i3status
}

# vim: sw=4 ts=4 wm=4 et ft=conf
